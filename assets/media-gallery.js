var c=t=>{throw TypeError(t)};var h=(t,a,e)=>a.has(t)||c("Cannot "+e);var n=(t,a,e)=>(h(t,a,"read from private field"),e?e.call(t):a.get(t)),o=(t,a,e)=>a.has(t)?c("Cannot add the same private member more than once"):a instanceof WeakSet?a.add(t):a.set(t,e);import{C as p}from"./component.js";import{T as m}from"./events.js";import"./utilities.js";var i,l,r;class f extends p{constructor(){super(...arguments);o(this,i,new AbortController);o(this,l,e=>{const s=e.detail.data.html;if(!s)return;const d=s.querySelector("media-gallery");d&&this.replaceWith(d)});o(this,r,async e=>{this.slideshow?.select(e.detail.index,void 0,{animate:!1})})}connectedCallback(){super.connectedCallback();const{signal:e}=n(this,i);this.closest(".shopify-section, dialog")?.addEventListener(m.variantUpdate,n(this,l),{signal:e}),this.refs.zoomDialogComponent?.addEventListener(m.zoomMediaSelected,n(this,r),{signal:e})}disconnectedCallback(){super.disconnectedCallback(),n(this,i).abort()}zoom(e,s){this.refs.zoomDialogComponent?.open(e,s)}get slideshow(){return this.refs.slideshow}get media(){return this.refs.media}get presentation(){return this.dataset.presentation}}i=new WeakMap,l=new WeakMap,r=new WeakMap;customElements.get("media-gallery")||customElements.define("media-gallery",f);
