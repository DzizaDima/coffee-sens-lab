var l=e=>{throw TypeError(e)};var u=(e,i,t)=>i.has(e)||l("Cannot "+t);var c=(e,i,t)=>(u(e,i,"read from private field"),t?t.call(e):i.get(e)),d=(e,i,t)=>i.has(e)?l("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(e):i.set(e,t);var f=(e,i,t)=>(u(e,i,"access private method"),t);var n,s,m;class h extends HTMLElement{constructor(){super(...arguments);d(this,s);d(this,n,t=>{if(t.defaultPrevented||t.target instanceof Element&&t.target.closest('button, input, label, select, [tabindex="1"]'))return;const r=this.querySelector("[data-view-transition-to-main-product]");if(!this.productTransitionEnabled||!(r instanceof HTMLElement))return;const a=r.querySelector('slideshow-slide[aria-hidden="false"] [transitionToProduct="true"]')||r.querySelector('[transitionToProduct="true"]:last-child');a instanceof HTMLImageElement&&f(this,s,m).call(this,a),r.setAttribute("data-view-transition-type","product-image-transition"),r.setAttribute("data-view-transition-triggered","true")})}connectedCallback(){this.addEventListener("click",c(this,n))}disconnectedCallback(){this.removeEventListener("click",c(this,n))}get productTransitionEnabled(){return this.getAttribute("data-product-transition")==="true"}get featuredMediaUrl(){return this.getAttribute("data-featured-media-url")}}n=new WeakMap,s=new WeakSet,m=function(t){if(!this.featuredMediaUrl)return;const r=new URL(t.currentSrc),a=r.host+r.pathname;if(!this.featuredMediaUrl.includes(a)){const o=t.animate([{opacity:.8},{opacity:1}],{duration:125,easing:"ease-in-out"});o.onfinish=()=>{t.srcset=this.featuredMediaUrl??""}}};customElements.get("product-card-link")||customElements.define("product-card-link",h);
