var l=Object.defineProperty;var u=(r,t,e)=>t in r?l(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var a=(r,t,e)=>u(r,typeof t!="symbol"?t+"":t,e);import{T as d}from"./events.js";class p extends HTMLElement{constructor(){super(...arguments);a(this,"updatePrice",e=>{if(e.detail.data.newProduct)this.dataset.productId=e.detail.data.newProduct.id;else if(e.target instanceof HTMLElement&&e.target.dataset.productId!==this.dataset.productId)return;const c=e.detail.data.html.querySelector(`product-price[data-block-id="${this.dataset.blockId}"]`);if(!c)return;const n=c.querySelector('[ref="priceContainer"]'),s=this.querySelector('[ref="priceContainer"]');n&&s&&s.replaceWith(n);const i=this.querySelector(".volume-pricing-note"),o=c.querySelector(".volume-pricing-note");o?i?i.replaceWith(o):this.querySelector('[ref="priceContainer"]')?.insertAdjacentElement("afterend",o.cloneNode(!0)):i?.remove()})}connectedCallback(){const e=this.closest(".shopify-section, dialog");e&&e.addEventListener(d.variantUpdate,this.updatePrice)}disconnectedCallback(){const e=this.closest(".shopify-section, dialog");e&&e.removeEventListener(d.variantUpdate,this.updatePrice)}}customElements.get("product-price")||customElements.define("product-price",p);
