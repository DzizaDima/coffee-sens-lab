var y=Object.defineProperty;var m=t=>{throw TypeError(t)};var P=(t,o,e)=>o in t?y(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e;var f=(t,o,e)=>P(t,typeof o!="symbol"?o+"":o,e),u=(t,o,e)=>o.has(t)||m("Cannot "+e);var i=(t,o,e)=>(u(t,o,"read from private field"),e?e.call(t):o.get(t)),p=(t,o,e)=>o.has(t)?m("Cannot add the same private member more than once"):o instanceof WeakSet?o.add(t):o.set(t,e),c=(t,o,e,r)=>(u(t,o,"write to private field"),r?r.call(t,e):o.set(t,e),e);import{C as E}from"./component.js";import{d as w,r as L}from"./utilities.js";var s,d,v,l,g,a,h;class b extends E{constructor(){super(...arguments);f(this,"requiredRefs",["popover","trigger"]);f(this,"interaction_delay",200);p(this,s,null);p(this,d,()=>{const{trigger:e,popover:r}=this.refs;e.dataset.hoverActive="true",r.matches(":popover-open")||c(this,s,setTimeout(()=>{e.matches("[data-hover-active]")&&r.showPopover()},this.interaction_delay))});p(this,v,()=>{const{trigger:e,popover:r}=this.refs;delete e.dataset.hoverActive,i(this,s)&&clearTimeout(i(this,s)),r.matches(":popover-open")&&c(this,s,setTimeout(()=>{r.hidePopover()},this.interaction_delay))});p(this,l,()=>{i(this,s)&&clearTimeout(i(this,s))});p(this,g,()=>{const{popover:e}=this.refs;c(this,s,setTimeout(()=>{e.hidePopover()},this.interaction_delay))});p(this,a,async()=>{const{popover:e,trigger:r}=this.refs;if(!e||!r)return;const n=r.getBoundingClientRect();e.style.setProperty("--anchor-top",`${n.top}`),e.style.setProperty("--anchor-right",`${window.innerWidth-n.right}`),e.style.setProperty("--anchor-bottom",`${window.innerHeight-n.bottom}`),e.style.setProperty("--anchor-left",`${n.left}`),e.style.setProperty("--anchor-height",`${n.height}`),e.style.setProperty("--anchor-width",`${n.width}`)});p(this,h,w(()=>{const e=this.refs.popover;e&&e.matches(":popover-open")&&e.hidePopover()},100))}connectedCallback(){super.connectedCallback();const{popover:e,trigger:r}=this.refs;this.dataset.closeOnResize&&e.addEventListener("beforetoggle",n=>{window[n.newState==="open"?"addEventListener":"removeEventListener"]("resize",i(this,h))}),this.dataset.hoverTriggered&&(r.addEventListener("pointerenter",i(this,d)),r.addEventListener("pointerleave",i(this,v)),e.addEventListener("pointerenter",i(this,l)),e.addEventListener("pointerleave",i(this,g))),CSS.supports("position-anchor: --trigger")||(e.addEventListener("beforetoggle",()=>{i(this,a).call(this)}),L(()=>{i(this,a).call(this)}))}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",i(this,h))}}s=new WeakMap,d=new WeakMap,v=new WeakMap,l=new WeakMap,g=new WeakMap,a=new WeakMap,h=new WeakMap;customElements.get("anchored-popover-component")||customElements.define("anchored-popover-component",b);
