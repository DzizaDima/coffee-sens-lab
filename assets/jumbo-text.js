var m=t=>{throw TypeError(t)};var b=(t,s,e)=>s.has(t)||m("Cannot "+e);var o=(t,s,e)=>(b(t,s,"read from private field"),e?e.call(t):s.get(t)),c=(t,s,e)=>s.has(t)?m("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(t):s.set(t,e);var u=(t,s,e)=>(b(t,s,"access private method"),e);import{p as x,R as S}from"./utilities.js";var h,z,f,a,r;class E extends HTMLElement{constructor(){super(...arguments);c(this,h);c(this,f,()=>{if(!this.textContent?.trim()||(this.classList.remove("ready"),this.offsetWidth<=0))return;o(this,r).disconnect(),this.style.fontSize="1px";const e=g(this,this.offsetWidth);this.style.fontSize=`${e}px`,o(this,r).observe(this),this.classList.add("ready")});c(this,a,()=>{o(this,f).call(this);const i=this.getBoundingClientRect().bottom+window.scrollY,l=document.documentElement.offsetHeight-i;this.dataset.capText=(l<=100).toString()});c(this,r,new S(o(this,a)))}connectedCallback(){requestAnimationFrame(o(this,a)),this.dataset.textEffect&&this.dataset.textEffect!=="none"&&!x()&&u(this,h,z).call(this)}disconnectedCallback(){o(this,r).disconnect(),this.dataset.textEffect&&this.dataset.textEffect!=="none"&&!x()&&this.intersectionObserver?.disconnect()}}h=new WeakSet,z=function(){this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting?(this.classList.add("jumbo-text-visible"),this.dataset.animationRepeat==="false"&&this.intersectionObserver.unobserve(i.target)):this.classList.remove("jumbo-text-visible")})},{threshold:.3}),this.intersectionObserver.observe(this)},f=new WeakMap,a=new WeakMap,r=new WeakMap;function v(t,s,e){return t.style.fontSize=`${e}px`,t.scrollWidth>s}function g(t,s){let e=1,i=500;const l=.5,p=t.textContent?.length||0;let n=Math.min(i,Math.sqrt(s)*(15/Math.sqrt(Math.max(1,p))));v(t,s,n)?i=n:e=n;let d=0;const O=30;for(;i-e>l&&d<O;)n=(e+i)/2,v(t,s,n)?i=n:e=n,d++;return e*.99}customElements.get("jumbo-text")||customElements.define("jumbo-text",E);
