var J=Object.defineProperty;var k=o=>{throw TypeError(o)};var j=(o,i,e)=>i in o?J(o,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[i]=e;var p=(o,i,e)=>j(o,typeof i!="symbol"?i+"":i,e),v=(o,i,e)=>i.has(o)||k("Cannot "+e);var y=(o,i,e)=>(v(o,i,"read from private field"),e?e.call(o):i.get(o)),m=(o,i,e)=>i.has(o)?k("Cannot add the same private member more than once"):i instanceof WeakSet?i.add(o):i.set(o,e);var l=(o,i,e)=>(v(o,i,"access private method"),e);import{s as A}from"./section-renderer.js";import{C as S}from"./component.js";import{F as R,T as M}from"./events.js";import{s as $,d as z,l as P}from"./utilities.js";import"./morph.js";const q="q";var h,B,X,I;class E extends S{constructor(){super(...arguments);m(this,h);p(this,"requiredRefs",["facetsForm"]);p(this,"updateFilters",()=>{l(this,h,X).call(this),this.dispatchEvent(new R(this.createURLParameters())),l(this,h,I).call(this)})}createURLParameters(e=new FormData(this.refs.facetsForm)){let t=new URLSearchParams(e);t.get("filter.v.price.gte")===""&&t.delete("filter.v.price.gte"),t.get("filter.v.price.lte")===""&&t.delete("filter.v.price.lte"),t.delete("page");const s=l(this,h,B).call(this);return s&&t.set(q,s),t}get sectionId(){const e=this.getAttribute("section-id");if(!e)throw new Error("Section ID is required");return e}updateFiltersByURL(e){history.pushState("","",e),this.dispatchEvent(new R(this.createURLParameters())),l(this,h,I).call(this)}}h=new WeakSet,B=function(){return new URL(window.location.href).searchParams.get(q)??""},X=function(){const e=new URL(window.location.href),t=this.createURLParameters();e.search="";for(const[s,n]of t.entries())e.searchParams.append(s,n);history.pushState({urlParameters:t.toString()},"",e.toString())},I=function(){!this.closest("dialog")?$(()=>A.renderSection(this.sectionId),["product-grid"]):A.renderSection(this.sectionId)};customElements.get("facets-form-component")||customElements.define("facets-form-component",E);var T,K;class Z extends S{constructor(){super(...arguments);m(this,T);p(this,"prefetchPage",z(e=>{if(!(e.target instanceof HTMLElement))return;const t=this.closest("form");if(!t)return;const s=new FormData(t),n=e.target.querySelector("input");if(!(n instanceof HTMLInputElement))return;n.checked||s.append(n.name,n.value);const a=this.closest("facets-form-component");if(!(a instanceof E))return;const r=a.createURLParameters(s),c=new URL(window.location.pathname,window.location.origin);for(const[f,Q]of r)c.searchParams.append(f,Q);n.checked&&c.searchParams.delete(n.name,n.value),A.getSectionHTML(this.sectionId,!0,c)},200));p(this,"cancelPrefetchPage",()=>this.prefetchPage.cancel())}get sectionId(){const e=this.closest(".shopify-section")?.id;if(!e)throw new Error("FacetInputs component must be a child of a section");return e}updateFilters(){const e=this.closest("facets-form-component");e instanceof E&&(e.updateFilters(),l(this,T,K).call(this))}handleKeyDown(e){if(!(e.target instanceof HTMLElement))return;const t=e.target.querySelector("input");t instanceof HTMLInputElement&&(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.checked=!t.checked,this.updateFilters())}}T=new WeakSet,K=function(){if(!this.refs.facetInputs)return;const e=this.refs.facetInputs.filter(n=>n.checked),s=this.closest("details")?.querySelector("facet-status-component");s instanceof w&&s.updateListSummary(e)};customElements.get("facet-inputs-component")||customElements.define("facet-inputs-component",Z);var g,b,C,N,O;class ee extends S{constructor(){super(...arguments);m(this,b);m(this,g,e=>{if(e.metaKey)return;const t=/[0-9]|\.|,|'| |Tab|Backspace|Enter|ArrowUp|ArrowDown|ArrowLeft|ArrowRight|Delete|Escape/;e.key.match(t)||e.preventDefault()})}connectedCallback(){super.connectedCallback(),this.addEventListener("keydown",y(this,g))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("keydown",y(this,g))}updatePriceFilterAndResults(){const{minInput:e,maxInput:t}=this.refs;l(this,b,C).call(this,e),l(this,b,C).call(this,t);const s=this.closest("facets-form-component");s instanceof E&&(s.updateFilters(),l(this,b,N).call(this),l(this,b,O).call(this))}}g=new WeakMap,b=new WeakSet,C=function(e){if(e.value.trim()==="")return;const t=Number(e.value),s=Number(P(e.getAttribute("data-min")??"")),n=Number(P(e.getAttribute("data-max")??""));t<s&&(e.value=s.toString()),t>n&&(e.value=n.toString())},N=function(){const{minInput:e,maxInput:t}=this.refs;t.value&&e.setAttribute("data-max",t.value),e.value&&t.setAttribute("data-min",e.value),e.value===""&&t.setAttribute("data-min","0"),t.value===""&&e.setAttribute("data-max",t.getAttribute("data-max")??"")},O=function(){const{minInput:e,maxInput:t}=this.refs,n=this.closest("details")?.querySelector("facet-status-component");n instanceof w&&n?.updatePriceSummary(e,t)};customElements.get("price-facet-component")||customElements.define("price-facet-component",ee);var _,L;class te extends S{constructor(){super(...arguments);p(this,"requiredRefs",["clearButton"]);m(this,_,e=>{e.metaKey||e.key==="Enter"&&this.clearFilter(e)});m(this,L,e=>{const{clearButton:t}=this.refs;t instanceof Element&&t.classList.toggle("facets__clear--active",e.shouldShowClearAll())})}connectedCallback(){super.connectedCallback(),this.addEventListener("keyup",y(this,_)),document.addEventListener(M.FilterUpdate,y(this,L))}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(M.FilterUpdate,y(this,L))}clearFilter(e){if(!(e.target instanceof HTMLElement))return;if(e instanceof KeyboardEvent){if(e.key!=="Enter"&&e.key!==" ")return;e.preventDefault()}e.target.closest("facet-inputs-component, price-facet-component")?.querySelectorAll('[type="checkbox"]:checked, input').forEach(r=>{r instanceof HTMLInputElement&&(r.checked=!1,r.value="")});const n=e.target.closest("details")?.querySelector("facet-status-component");if(!(n instanceof w))return;n.clearSummary();const a=this.closest("facets-form-component");a instanceof E&&a.updateFilters()}}_=new WeakMap,L=new WeakMap;customElements.get("facet-clear-component")||customElements.define("facet-clear-component",te);var F;class se extends S{constructor(){super(...arguments);m(this,F,e=>{const{clearButton:t}=this.refs;t instanceof Element&&t.classList.toggle("active",e.shouldShowClearAll())})}connectedCallback(){super.connectedCallback(),document.addEventListener(M.FilterUpdate,y(this,F))}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener(M.FilterUpdate,y(this,F))}removeFilter({form:e},t){if(t instanceof KeyboardEvent){if(t.key!=="Enter"&&t.key!==" ")return;t.preventDefault()}const s=this.dataset.url;if(!s)return;const n=e?document.getElementById(e):this.closest("facets-form-component");n instanceof E&&n.updateFiltersByURL(s)}}F=new WeakMap;customElements.get("facet-remove-component")||customElements.define("facet-remove-component",se);var d,H,V,D;class ne extends S{constructor(){super(...arguments);m(this,d);p(this,"requiredRefs",["details","summary","listbox"]);p(this,"handleKeyDown",e=>{const{listbox:t}=this.refs;if(!(t instanceof Element))return;const s=Array.from(t.querySelectorAll('[role="option"]')),n=s.find(r=>r instanceof HTMLElement&&r.tabIndex===0);let a=n?s.indexOf(n):0;switch(e.key){case"ArrowDown":e.preventDefault(),a=Math.min(a+1,s.length-1),l(this,d,H).call(this,s,a);break;case"ArrowUp":e.preventDefault(),a=Math.max(a-1,0),l(this,d,H).call(this,s,a);break;case"Enter":case" ":if(e.target instanceof Element){const r=e.target.closest('[role="option"]');r&&(e.preventDefault(),l(this,d,V).call(this,r))}break;case"Escape":e.preventDefault(),l(this,d,D).call(this);break}});p(this,"handleToggle",()=>{const{details:e,summary:t,listbox:s}=this.refs;if(!(e instanceof HTMLDetailsElement)||!(t instanceof HTMLElement))return;const n=e.open;if(t.setAttribute("aria-expanded",n.toString()),n&&s instanceof Element){const a=s.querySelector('[aria-selected="true"]');a instanceof HTMLElement&&a.focus()}})}updateFilterAndSorting(e){const t=this.closest("facets-form-component")||this.closest(".shopify-section")?.querySelector("facets-form-component");if(!(t instanceof E))return;const s=window.innerWidth<750,n=this.dataset.shouldUseSelectOnMobile==="true";if(n)if(s)this.querySelectorAll('input[name="sort_by"]').forEach(c=>{c instanceof HTMLInputElement&&(c.disabled=!0)});else{const r=this.querySelector('select[name="sort_by"]');if(!(r instanceof HTMLSelectElement))return;r.disabled=!0}if(t.updateFilters(),this.updateFacetStatus(e),n)if(s)this.querySelectorAll('input[name="sort_by"]').forEach(c=>{c instanceof HTMLInputElement&&(c.disabled=!1)});else{const r=this.querySelector('select[name="sort_by"]');if(!(r instanceof HTMLSelectElement))return;r.disabled=!1}const{details:a}=this.refs;a instanceof HTMLDetailsElement&&(a.open=!1)}updateFacetStatus(e){if(!(e.target instanceof HTMLSelectElement))return;const t=this.querySelector("details");if(!t)return;const s=t.querySelector("facet-status-component");s instanceof w&&(s.textContent=e.target.value!==t.dataset.defaultSortBy?e.target.dataset.optionName??"":"")}}d=new WeakSet,H=function(e,t){e.forEach(n=>{n instanceof HTMLElement&&(n.tabIndex=-1)});const s=e[t];s instanceof HTMLElement&&(s.tabIndex=0,s.focus())},V=function(e){const t=e.querySelector('input[type="radio"]');t instanceof HTMLInputElement&&e instanceof HTMLElement&&(this.querySelectorAll('[role="option"]').forEach(s=>{s.setAttribute("aria-selected","false")}),e.setAttribute("aria-selected","true"),t.click(),l(this,d,D).call(this))},D=function(){const{details:e,summary:t}=this.refs;if(e instanceof HTMLDetailsElement){const s=this.querySelectorAll('[role="option"]'),n=this.querySelector('[aria-selected="true"]');s.forEach(a=>{a instanceof HTMLElement&&(a.tabIndex=-1)}),n instanceof HTMLElement&&(n.tabIndex=0),e.open=!1,t instanceof HTMLElement&&t.focus()}};customElements.get("sorting-filter-component")||customElements.define("sorting-filter-component",ne);var u,Y,W,x,U,G;class w extends S{constructor(){super(...arguments);m(this,u)}updateListSummary(e){const t=e.length;this.getAttribute("facet-type")==="swatches"?l(this,u,Y).call(this,e,t):l(this,u,W).call(this,e,t)}updatePriceSummary(e,t){const s=e.value,n=t.value,{facetStatus:a}=this.refs;if(!s&&!n){a.innerHTML="";return}const r=l(this,u,x).call(this,s,"0"),c=l(this,u,x).call(this,n,a.dataset.rangeMax);a.innerHTML=`${l(this,u,U).call(this,r)}â€“${l(this,u,U).call(this,c)}`}clearSummary(){this.refs.facetStatus.innerHTML=""}}u=new WeakSet,Y=function(e,t){const{facetStatus:s}=this.refs;if(s.classList.remove("bubble","facets__bubble"),t===0){s.innerHTML="";return}if(t>3){s.innerHTML=t.toString(),s.classList.add("bubble","facets__bubble");return}s.innerHTML=Array.from(e).map(n=>n.parentElement?.querySelector("span.swatch")?.outerHTML??"").join("")},W=function(e,t){const{facetStatus:s}=this.refs,n=this.dataset.filterStyle;if(s.classList.remove("bubble","facets__bubble"),t===0){s.innerHTML="";return}if(n==="horizontal"&&t===1){s.innerHTML=e[0]?.dataset.label??"";return}s.innerHTML=t.toString(),s.classList.add("bubble","facets__bubble")},x=function(e,t="0"){const s=e?e.trim().split(/[^0-9]/):(parseInt(t,10)/100).toString(),[n,a,...r]=s;if(typeof n!="string"||r.length>0)return parseInt(t,10);const c=parseInt(n,10);let f=parseInt(a||"0",10);return f=f*Math.pow(10,2-f.toString().length),c*100+f},U=function(e){if(!(this.refs.moneyFormat instanceof HTMLTemplateElement))return"";const t=this.refs.moneyFormat.content.textContent||"{{amount}}",s=this.refs.facetStatus.dataset.currency||"";return t.replace(/{{\s*(\w+)\s*}}/g,(n,a)=>{if(typeof a!="string")return"";if(a==="currency")return s;let r=",",c=".",f=re[s.toUpperCase()]??ae;return a==="amount"||(a==="amount_no_decimals"?f=0:a==="amount_with_comma_separator"?(r=".",c=","):a==="amount_no_decimals_with_comma_separator"?(r=".",f=0):a==="amount_no_decimals_with_space_separator"?(r=" ",f=0):a==="amount_with_space_separator"?(r=" ",c=","):a==="amount_with_period_and_space_separator"?(r=" ",c="."):a==="amount_with_apostrophe_separator"&&(r="'",c=".")),l(this,u,G).call(this,e,r,c,f)})},G=function(e,t,s,n){const a=(e/100).toFixed(n);let[r,c]=a.split(".");return r||(r="0"),c||(c=""),r=r.replace(/\d(?=(\d\d\d)+(?!\d))/g,f=>f+t),n<=0?r:r+s+c.padEnd(n,"0")};customElements.get("facet-status-component")||customElements.define("facet-status-component",w);const ae=2,re={BHD:3,BIF:0,BYR:0,CLF:4,CLP:0,DJF:0,GNF:0,IQD:3,ISK:0,JOD:3,JPY:0,KMF:0,KRW:0,KWD:3,LYD:3,MRO:5,OMR:3,PYG:0,RWF:0,TND:3,UGX:0,UYI:0,UYW:4,VND:0,VUV:0,XAF:0,XAG:0,XAU:0,XBA:0,XBB:0,XBC:0,XBD:0,XDR:0,XOF:0,XPD:0,XPF:0,XPT:0,XSU:0,XTS:0,XUA:0};
