(function(){if(window.matchMedia("(prefers-reduced-motion: reduce)").matches){const t=document.getElementById("view-transition-render-blocker");t&&t.remove()}const r=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;window.addEventListener("pageswap",async t=>{if(!o(t))return;const{viewTransition:e}=t;["pointerdown","keydown"].forEach(a=>{document.addEventListener(a,()=>{e.skipTransition()},{once:!0})}),document.querySelectorAll("[data-view-transition-type]:not([data-view-transition-triggered])").forEach(a=>{a.removeAttribute("data-view-transition-type")});const i=document.querySelector("[data-view-transition-triggered]")?.getAttribute("data-view-transition-type");i?(e.types.clear(),e.types.add(i),sessionStorage.setItem("custom-transition-type",i)):(e.types.clear(),e.types.add("page-navigation"),sessionStorage.removeItem("custom-transition-type"))}),window.addEventListener("pagereveal",async t=>{if(!o(t))return;const{viewTransition:e}=t,n=sessionStorage.getItem("custom-transition-type");n?(e.types.clear(),e.types.add(n),await e.finished,e.types.clear(),e.types.add("page-navigation"),r(()=>{sessionStorage.removeItem("custom-transition-type"),document.querySelectorAll("[data-view-transition-type]").forEach(i=>{i.removeAttribute("data-view-transition-type")})})):(e.types.clear(),e.types.add("page-navigation"))});function o(t){return"viewTransition"in t&&t.viewTransition instanceof ViewTransition}})();
